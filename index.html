<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>2DEG calculator</title>
	</head>
	<body style="background-color:#EEF">
		<div id='constant', style='background:#ddd'></div>
		<table id='table_0d_1d' bgcolor='#edb'></table>
		<table id='table_2d' bgcolor='#dec'></table>
	</body>
	<script type="text/javascript">
		//define constants which will be shown and used later, in SI units
		const e = 1.602176565e-19;//C, Elementary charge
		t = 'e: '+e+'<br>';
		const eps0 = 8.854187817e-12;//F/m, vacuum permittivity
		t +='eps0: '+eps0+'<br>';
		const h = 6.62606957e-34;//
		t +='h: '+h+'<br>';
		const hbar = 1.054571726e-34;//
		t +='hbar: '+hbar+'<br>';
		const me = 9.10938291e-31;//mass of an electron
		t +='me: '+me+'<br>';
		const kb = 1.3806505e-23;//Boltzmann constant
		t +='kb: '+kb+'<br>';
		const u = 1.660538921e-27;//atomic mass constant
		t +='u: '+u+'<br>';
		const c = 299792458;
		t +='c: '+c+'<br>';
		const miub = 9.27400949e-24;//bo er ci zi?
		t +='miub: '+miub;
		t += '&emsp;&emsp;&emsp;&emsp;<td><input style="width:150px" type="text" id="cal_oupt" disabled=true/></td>';
		t += '<td><button onClick="cal()"> calc </button></td>';
		t += '<td>&emsp;expression:</td><td colspan="5"><input style="width:300px" type="text" id="cal_inpt" value="h/Math.pow(e,2)/1000"/></td><br>';
		document.getElementById('constant').innerHTML = t;
		//end constant
		function cal(){
            let inpt = document.getElementById('cal_inpt').value;
	        document.getElementById('cal_oupt').value=eval(inpt).toExponential(6);
		}
		function addFormula(tableID,f,id,u,v,w){
			//tableID is HTML id of which table to put the formula
			//f is latex string of a formula, id is an HTML id for this formula,
			//u, v, w are arrays of variable name, variable HTML id and variable default value
			t = '<tr><td>$'+f+'$</td><td><input style="width:180px" type="number" id="'+id+'" disabled=true/></td><td><button onClick="cal_'+id+'()"> calc </button></td>';
			for (i = 0; i < v.length; i++) { 
				t += '<td>$'+u[i]+'$:</td><td><input style="width:60px" type="number" id="'+v[i]+'"/ value='+w[i]+'></td>';
			}
			t += '</tr>'
			document.getElementById(tableID).innerHTML += t;
		}
		//begin funtions of formula
		//begin 1D and 0D
	function cal_fresonator(){
	    let epsr = document.getElementById('fres_epsr').value;
			let L = document.getElementById('fresonator_L').value;
		}
	    	addFormula('table_MW','f = \\frac{c / \\sqrt{\\epsilon_r}}{4L}','fresonator',['\\epsilon_r','L'],['fres_epsr','fres_L'],[1,1]);
        function cal_Csphere(){
            let epsr = document.getElementById('Csphere_e').value;
			let R = document.getElementById('Csphere_R').value/1.e6;
			document.getElementById('Csphere').value=4.*Math.PI*eps0*epsr*R/1.e-18;
		}
		addFormula('table_0d_1d','C_{sphere} = 4 \\pi \\epsilon R = 111 \\epsilon_r R(\\mathrm{um}) \\mathrm{aF}',
			'Csphere',['\\epsilon_r','R'],['Csphere_e','Csphere_R'],[1,1]);
        function cal_Cdisk(){
            let epsr = document.getElementById('Cdisk_e').value;
			let R = document.getElementById('Cdisk_R').value/1.e6;
			document.getElementById('Cdisk').value=8.*eps0*epsr*R/1.e-18;
		}
		addFormula('table_0d_1d','C_{disk} = 8 \\epsilon R = 71 \\epsilon_r R(\\mathrm{um}) \\mathrm{aF}',
			'Cdisk',['\\epsilon_r','R'],['Cdisk_e','Cdisk_R'],[1,1]);
		function cal_Cplate(){
            let epsr = document.getElementById('Cplate_e').value;
			let L = document.getElementById('Cplate_L').value/1.e6;
			let W = document.getElementById('Cplate_W').value/1.e6;
			let d = document.getElementById('Cplate_d').value/1.e6;
			document.getElementById('Cplate').value=eps0*epsr*L*W/d/1.e-18;
		}
		addFormula('table_0d_1d','C_{plate} = \\frac{\\epsilon A}{d} = 9 \\epsilon_r \\frac{ L W}{d}(\\mathrm{um})   \\mathrm{aF}',
			'Cplate',['\\epsilon_r','L','W','d'],['Cplate_e','Cplate_L','Cplate_W','Cplate_d'],[1,10,10,0.1]);
        function cal_Echarging(){
            let C = document.getElementById('Echarging_C').value*1e-18;
			document.getElementById('Echarging').value=e/C*1000.;
		}
		addFormula('table_0d_1d','E_{charging} = \\frac{e^2}{C} = \\frac{160}{C(\\mathrm{aF})}\\mathrm{meV}',
			'Echarging',['C'],['Echarging_C'],[1]);
		//end 1D and 0D
		//end funtions of formula
		MathJax.Hub.Queue(["Typeset",MathJax.Hub,"maintable"]);//let MathJax know HTML has been changed
        </script>
	<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  inlineMath: [ ['$','$'] ],
			  displayMath: [ ["\\[","\\]"] ],
			  processEscapes: true
			}
		  });
	</script>
	<script type="text/javascript" src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</html>
